<div *ngIf="loading " class="loader w-100 h-100 d-flex justify-content-center position-absolute  ">
    <div class="spinner-border mx-auto" role="status">
        <span class="visually-hidden">Loading...</span>
    </div>
</div>

<div *ngIf="cartItems.length === 0">
    <h1 class="text-center">Your cart is empty</h1>
</div>

<div class="p-4 d-flex flex-column flex-md-row gap-3 justify-content-center " *ngIf="cartItems.length">
    <div style="max-width: 45rem;">
         <h1>Shopping Cart</h1>
        <div>
            <div *ngFor="let items of cartItems" class="d-flex flex-row gap-2 p-2 mt-1 justify-content-between border "style="shadow-lg;">
                <div class="d-flex flex-row gap-2">
                    <img src="{{items.productId.thumbnail}}" alt="{{items.productId.title}}"
                        style="width: 5rem; height: 5.5rem; object-fit: fill;">
                    <div >
                        <h5>{{items.productId.title}}</h5>
                        <h6 style="height: 2.2rem;  overflow-y: hidden;">{{items.productId.description}}</h6>
                        <div class="quantityBtn" >
                            <i class="bi bi-dash-lg px-2 bg-danger mx-1 rounded "
                                (click)="cartUpdate(items.productId._id,items.quantity-1)"></i>
                            <input type="text" style="width: 50px; height: 20px;" value="{{items.quantity}}" disabled>
                            <i class="bi bi-plus-lg px-2 bg-primary mx-1 rounded"
                                (click)="cartUpdate(items.productId._id,items.quantity+1)"></i>
             
                   

           

                        </div>
<span *ngIf="items.productId.stock === 0" style=" color: red;">out of stock </span>
                    </div>

                </div>
                <span
                    style="width:8.5rem; margin: 2px; display: flex; flex-direction: column; justify-content: space-between; text-align:right;">
                    <span>
                        <i class="bi bi-currency-dollar"></i>
                        <span>{{items.productId.price}}</span>
                    </span>
                    <i class="bi bi-trash text-danger" title="Delete" (click)="cartUpdate(items.productId._id,0)"></i>
                </span>




            </div>
        </div>
    </div>

    <div
        style="min-width:16rem;  max-width: 25rem; height: max-content; padding: 3px; border: 1px solid rgb(206, 208, 209); text-align: center; margin-top: 45px;">
        <h2>Cart Summery</h2>
        <div class="summery">
            <span>Subtotal</span>
            <span>{{cartDetails.totalPrice}}$</span>
        </div>
        <div class="summery">
            <!-- {{cartDetails.items | json}} -->
            <span>Total Items</span>
            <span>{{cartDetails.totalItems}}</span>
        </div>
        <div class="summery">
            <span>Shipping charges</span>
            <span>0</span>
        </div>
        <hr>
        <div class="summery">
            <span>Total</span>
            <span>{{cartDetails.totalPrice}}$</span>
        </div>
        <button class="btn btn-primary w-75 m-auto mt-3 mb-2" routerLink="/checkout">Procced to checkout</button>
    </div>
</div>